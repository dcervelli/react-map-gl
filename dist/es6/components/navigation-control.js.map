{"version":3,"sources":["../../../src/components/navigation-control.js"],"names":["createElement","PropTypes","BaseControl","MapState","TransitionManager","deprecateWarn","LINEAR_TRANSITION_PROPS","Object","assign","defaultProps","transitionDuration","propTypes","className","string","onViewStateChange","func","onViewportChange","showCompass","bool","showZoom","NavigationControl","constructor","props","_updateViewport","zoom","context","viewport","bearing","pitch","shouldComponentUpdate","nextProps","nextState","nextContext","opts","mapState","viewState","getViewportProps","onChangeViewport","_renderCompass","style","transform","_renderButton","type","label","callback","children","key","title","onClick","render","ref","_onContainerLoad","_onZoomIn","_onZoomOut","_onResetNorth","displayName"],"mappings":"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","sourcesContent":["import {createElement} from 'react';\nimport PropTypes from 'prop-types';\nimport BaseControl from './base-control';\n\nimport MapState from '../utils/map-state';\nimport TransitionManager from '../utils/transition-manager';\n\nimport deprecateWarn from '../utils/deprecate-warn';\n\nconst LINEAR_TRANSITION_PROPS = Object.assign({}, TransitionManager.defaultProps, {\n  transitionDuration: 300\n});\n\nconst propTypes = Object.assign({}, BaseControl.propTypes, {\n  // Custom className\n  className: PropTypes.string,\n  // Callbacks fired when the user interacted with the map. The object passed to the callbacks\n  // contains viewport properties such as `longitude`, `latitude`, `zoom` etc.\n  onViewStateChange: PropTypes.func,\n  onViewportChange: PropTypes.func,\n  // Show/hide compass button\n  showCompass: PropTypes.bool,\n  // Show/hide zoom buttons\n  showZoom: PropTypes.bool\n});\n\nconst defaultProps = Object.assign({}, BaseControl.defaultProps, {\n  className: '',\n  onViewStateChange: () => {},\n  onViewportChange: () => {},\n  showCompass: true,\n  showZoom: true\n});\n\n/*\n * PureComponent doesn't update when context changes, so\n * implementing our own shouldComponentUpdate here.\n */\nexport default class NavigationControl extends BaseControl {\n\n  constructor(props) {\n    super(props);\n    // Check for deprecated props\n    deprecateWarn(props);\n  }\n\n  shouldComponentUpdate(nextProps, nextState, nextContext) {\n    return this.context.viewport.bearing !== nextContext.viewport.bearing;\n  }\n\n  _updateViewport(opts) {\n    const {viewport} = this.context;\n    const mapState = new MapState(Object.assign({}, viewport, opts));\n    const viewState = Object.assign({}, mapState.getViewportProps(), LINEAR_TRANSITION_PROPS);\n\n    // Call new style callback\n    this.props.onViewStateChange({viewState});\n\n    // Call old style callback\n    // TODO(deprecate): remove this check when `onChangeViewport` gets deprecated\n    const onViewportChange = this.props.onChangeViewport || this.props.onViewportChange;\n    onViewportChange(viewState);\n  }\n\n  _onZoomIn = () => {\n    this._updateViewport({zoom: this.context.viewport.zoom + 1});\n  }\n\n  _onZoomOut = () => {\n    this._updateViewport({zoom: this.context.viewport.zoom - 1});\n  }\n\n  _onResetNorth = () => {\n    this._updateViewport({bearing: 0, pitch: 0});\n  }\n\n  _renderCompass() {\n    const {bearing} = this.context.viewport;\n    return createElement('span', {\n      className: 'mapboxgl-ctrl-compass-arrow',\n      style: {transform: `rotate(${bearing}deg)`}\n    });\n  }\n\n  _renderButton(type, label, callback, children) {\n    return createElement('button', {\n      key: type,\n      className: `mapboxgl-ctrl-icon mapboxgl-ctrl-${type}`,\n      type: 'button',\n      title: label,\n      onClick: callback,\n      children\n    });\n  }\n\n  render() {\n\n    const {className, showCompass, showZoom} = this.props;\n\n    return createElement('div', {\n      className: `mapboxgl-ctrl mapboxgl-ctrl-group ${className}`,\n      ref: this._onContainerLoad\n    }, [\n      showZoom && this._renderButton('zoom-in', 'Zoom In', this._onZoomIn),\n      showZoom && this._renderButton('zoom-out', 'Zoom Out', this._onZoomOut),\n      showCompass &&\n        this._renderButton('compass', 'Reset North', this._onResetNorth, this._renderCompass())\n    ]);\n  }\n}\n\nNavigationControl.displayName = 'NavigationControl';\nNavigationControl.propTypes = propTypes;\nNavigationControl.defaultProps = defaultProps;\n"],"file":"navigation-control.js"}